{% extends "base.html" %}

{% block content %}
<div class="learn-page">
    <h1 class="page-main-title text-center">Media Literacy Learning Center</h1>
    <p class="page-main-subtitle text-center">Develop critical thinking skills to navigate today's information landscape</p>

    <div class="tab-selection-container">
        <div class="tab-item active" id="media-mentor-tab">
            <img src="{{ url_for('static', filename='img/mediamentor.png') }}" alt="Media Mentor Icon" class="tab-icon">
            <span>Media Mentor</span>
        </div>
        <div class="tab-item" id="knowledge-hub-tab">
            <img src="{{ url_for('static', filename='img/knowledgehub.png') }}" alt="Knowledge Hub Icon" class="tab-icon">
            <span>Knowledge Hub</span>
        </div>
    </div>

    <div class="chatbot-container" id="media-mentor-section">
        <div class="chatbot-header-info">
            <img src="{{ url_for('static', filename='img/robot.png') }}" alt="Robot Profile" class="robot-profile-pic">
            <div class="header-text">
                <span class="bold-text">Media Mentor</span>
                <span class="grey-text">Your AI guide to media literacy</span>
            </div>
            <button class="clear-chat-btn" id="clear-chat-btn">
                <img src="{{ url_for('static', filename='img/clear.png') }}" alt="Clear Chat Icon" class="clear-icon">
                Clear
            </button>
        </div>

        <div class="chat-messages" id="chat-messages">
            <!-- Initial bot message (now handled solely by JS loadChatHistory) -->
        </div>

        <div class="chat-input-area">
            <input type="text" id="chat-input" placeholder="Ask me about media literacy...">
            <button id="send-chat-btn" class="send-button">
                <img src="{{ url_for('static', filename='img/send.png') }}" alt="Send Icon" class="send-icon">
            </button>
        </div>
    </div>

    <div class="knowledge-hub-container" id="knowledge-hub-section" style="display: none;">
        <h2 class="knowledge-hub-main-title">Knowledge Hub</h2>
        <p class="knowledge-hub-main-subtitle">Explore 31 lessons across 7 learning units about media literacy</p>

        <div class="learn-units-container" id="learn-units-container">
            <!-- Units will be rendered here by JavaScript -->
        </div>
        <p id="total-articles-count" class="total-articles-count text-center"></p>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    // Define global JavaScript variables for avatar URLs, processed by Flask's Jinja2
    const BOT_AVATAR_URL = "{{ url_for('static', filename='img/robot.png') }}";
    const USER_AVATAR_URL = "{{ url_for('static', filename='img/avatars/default_profile.jpeg') }}";
</script>
<script src="{{ url_for('static', filename='js/learn.js') }}"></script>
{% endblock %}