{% extends "base.html" %}

{% block content %}
<div class="learn-page">
    <h1 class="page-main-title text-center">Media Literacy Learning Center</h1>
    <p class="page-main-subtitle text-center">Develop critical thinking skills to navigate today's information landscape</p>

    <div class="tab-selection-container">
        <div class="tab-item active" id="media-mentor-tab">
            <img src="{{ url_for('static', filename='img/mediamentor.png') }}" alt="Media Mentor Icon" class="tab-icon">
            <span>Media Mentor</span>
        </div>
        <div class="tab-item" id="knowledge-hub-tab">
            <img src="{{ url_for('static', filename='img/knowledgehub.png') }}" alt="Knowledge Hub Icon" class="tab-icon">
            <span>Knowledge Hub</span>
        </div>
    </div>

    <div class="chatbot-container" id="media-mentor-section">
        <div class="chatbot-header-info">
            <img src="{{ url_for('static', filename='img/robot.png') }}" alt="Robot Profile" class="robot-profile-pic">
            <div class="header-text">
                <span class="bold-text">Media Mentor</span>
                <span class="grey-text">Your AI guide to media literacy</span>
            </div>
            <button class="clear-chat-btn" id="clear-chat-btn">
                <img src="{{ url_for('static', filename='img/clear.png') }}" alt="Clear Chat Icon" class="clear-icon">
                Clear
            </button>
        </div>

        <div class="chat-messages" id="chat-messages">
            <!-- Initial bot message (now handled solely by JS loadChatHistory) -->
        </div>

        <div class="chat-input-area">
            <input type="text" id="chat-input" placeholder="Ask me about media literacy...">
            <button id="send-chat-btn" class="send-button">
                <!-- CHANGED: Reverted to img tag for send.png -->
                <img src="{{ url_for('static', filename='img/send.png') }}" alt="Send Icon" class="send-icon">
            </button>
        </div>
    </div>

    <div class="knowledge-hub-container" id="knowledge-hub-section" style="display: none;">
        <h2 class="knowledge-hub-title">Knowledge Hub</h2>
        <p class="knowledge-hub-subtitle">Explore articles and lessons to deepen your media literacy skills.</p>

        <div class="knowledge-hub-filters">
            <div class="filter-group">
                <label for="category-filter">Category:</label>
                <select id="category-filter">
                    <option value="all">All Categories</option>
                    <option value="fundamentals">Fundamentals</option>
                    <option value="understanding-media">Understanding Media</option>
                    <option value="credible-sources">Credible Sources</option>
                    <option value="identifying-bias">Identifying Bias</option>
                    <option value="deconstructing-messages">Deconstructing Messages</option>
                    <option value="digital-citizenship">Digital Citizenship</option>
                    <option value="social-media-literacy">Social Media Literacy</option>
                    <option value="media-and-ethics">Media and Ethics</option>
                    <option value="creating-responsible-media">Creating Responsible Media</option>
                    <option value="media-in-global-context">Media in Global Context</option>
                    <option value="future-of-media">Future of Media</option>
                </select>
            </div>
            <div class="filter-group">
                <label for="difficulty-filter">Difficulty:</label>
                <select id="difficulty-filter">
                    <option value="all">All Difficulties</option>
                    <option value="beginner">Beginner</option>
                    <option value="intermediate">Intermediate</option>
                    <option value="advanced">Advanced</option>
                </select>
            </div>
            <span id="articles-count" class="articles-count-display"></span>
        </div>

        <div class="learn-articles-grid" id="learn-articles-grid">
            <!-- Learning articles will be rendered here by JavaScript -->
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    // Define global JavaScript variables for avatar URLs, processed by Flask's Jinja2
    const BOT_AVATAR_URL = "{{ url_for('static', filename='img/robot.png') }}";
    const USER_AVATAR_URL = "{{ url_for('static', filename='img/default_profile.jpeg') }}";
</script>
<script src="{{ url_for('static', filename='js/learn.js') }}"></script>
{% endblock %}